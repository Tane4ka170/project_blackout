{"version":3,"file":"static/js/346.48db6b0d.chunk.js","mappings":"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","sources":["pages/Income/Income.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { Navigate } from 'react-router-dom';\n\nimport { selectIsLoggedIn } from 'redux/auth/selectors';\nimport { Filter } from 'components/filter/Filter';\nimport { selectFilter, selectStartDate } from 'redux/filter/filterSelector';\nimport {\n  deleteTransactionThunk,\n  getTransactionsThunk,\n} from 'redux/transactions/operations';\nimport { selectTransaction } from 'redux/transactions/selectors';\nimport { SectionTransaction } from 'components/sectionTransactionList/sectionTransaction';\nimport { TotalExpense, TotalIncome } from 'shared/Total';\n\nimport {\n  DIV,\n  DIV375,\n  DIVL,\n  DIVMAIN,\n  DIVTR,\n  DelBtn,\n  EditBtn,\n  H2,\n  LI,\n  MainWr,\n  P1,\n  P2,\n  P3,\n  P4,\n  P5,\n  PEr,\n  PH,\n  TransactionsContainer,\n  ULL,\n} from './Income.styled';\nimport svg from '../../images/Sprite.svg';\nimport { FramerMotion } from 'helpers/framer-motion';\n\n// edit modal\nimport Modal from 'components/modal/Modal';\nimport { useModal } from 'components/hooks/useModal';\nimport OperationForm from 'shared/OperationForm/OperationForm';\n\n\nexport const Income = () => {\n  const dispatch = useDispatch();\n  const filter = useSelector(selectFilter);\n\n  const { isOpened, openModal, closeModal } = useModal();\n  const [ editData, setEditData ] = useState('')\n\n  const isLoggedIn = useSelector(selectIsLoggedIn);\n  const transactions = useSelector(selectTransaction);\n  const date = useSelector(selectStartDate);\n\n  const formattedDate = `${date.year}-${String(date.month).padStart(\n    2,\n    '0'\n  )}-${String(date.day).padStart(2, '0')}`;\n\n  useEffect(() => {\n    // const nowDate = new Date();\n    // if (!date) {\n    //   const year = nowDate.getFullYear();\n    //   const month = nowDate.getMonth() + 1;\n    //   const day = nowDate.getDate();\n    //   dispatch(\n    //     getTransactionsThunk({ type: 'incomes', date: { year, month, day } })\n    //   );\n    // }\n    dispatch(getTransactionsThunk({ type: 'incomes', date: formattedDate }));\n  }, [dispatch, filter, formattedDate, date]);\n\n  const handleDelete = (transactionId, transactionComment) => {\n    dispatch(deleteTransactionThunk(transactionId));\n    toast.success(`Transaction ${transactionComment} was deleted`);\n  };\n\n  const filterTransactions = transactions.filter(transaction =>\n    transaction.comment\n      .toLowerCase()\n      .trim()\n      .includes(filter.toLowerCase().trim())\n  );\n\n  if (!isLoggedIn) {\n    return <Navigate to=\"/login\" />;\n  }\n\n  const isDeletedCategory = catName => {\n    if (!catName) {\n      return `Deleted Category`;\n    }\n    return catName;\n  };\n\n  return (\n    <MainWr>\n      <DIVMAIN>\n        <DIVL>\n          <H2>All Income</H2>\n          <PH>\n            Track and celebrate every bit of earnings effortlessly! Gain\n            insights into your total revenue in a snap.\n          </PH>\n        </DIVL>\n\n        <ULL>\n          <LI>\n            <TotalIncome />\n          </LI>\n          <LI>\n            <TotalExpense />\n          </LI>\n        </ULL>\n      </DIVMAIN>\n      <FramerMotion $variant=\"allIncomesList\">\n        <DIVTR>\n          <Filter />\n          <DIV375>\n            <SectionTransaction />\n            {filterTransactions?.length ? (\n              <TransactionsContainer>\n                {filterTransactions?.map(transaction => (\n                  <DIV key={transaction._id}>\n                    <P1>\n                      {isDeletedCategory(transaction.category?.categoryName)}\n                    </P1>\n                    <P2>{transaction.comment}</P2>\n                    <P3>{transaction.date}</P3>\n                    <P4>{transaction.time}</P4>\n                    <P5>{transaction.sum} / UAH</P5>\n                    <EditBtn onClick={() => { setEditData(transaction); openModal() }}>\n                      <svg width={16} height={16}>\n                        <use href={svg + '#icon-edit-2'}></use>\n                      </svg>\n                      <span>Edit</span>\n                    </EditBtn>\n                    <DelBtn\n                      onClick={() =>\n                        handleDelete(transaction._id, transaction.comment)\n                      }\n                    >\n                      <svg width={16} height={16}>\n                        <use href={svg + '#icon-trash-2'}></use>\n                      </svg>\n                      <span>Delete</span>\n                    </DelBtn>\n                  </DIV>\n                ))}\n              </TransactionsContainer>\n            ) : null}\n            {filter.trim().length > 0 && !filterTransactions.length && (\n              <PEr>\n                We couldn't find any transactions matching your request.\n              </PEr>\n            )}\n          </DIV375>\n        </DIVTR>\n      </FramerMotion>\n      {isOpened ? (\n        <Modal\n          children={<OperationForm edit={true} editData={editData} closeModal={closeModal} />}\n          closeModal={closeModal}\n        />\n      ) : null}\n    </MainWr>\n  );\n};\nexport default Income;\n"],"names":["Income","dispatch","useDispatch","filter","useSelector","selectFilter","_useModal","useModal","isOpened","openModal","closeModal","_useState","useState","_useState2","_slicedToArray","editData","setEditData","isLoggedIn","selectIsLoggedIn","transactions","selectTransaction","date","selectStartDate","formattedDate","concat","year","String","month","padStart","day","useEffect","getTransactionsThunk","type","filterTransactions","transaction","comment","toLowerCase","trim","includes","_jsx","Navigate","to","_jsxs","MainWr","children","DIVMAIN","DIVL","H2","PH","ULL","LI","TotalIncome","TotalExpense","FramerMotion","$variant","DIVTR","Filter","DIV375","SectionTransaction","length","TransactionsContainer","map","_transaction$category","catName","DIV","P1","category","categoryName","P2","P3","P4","time","P5","sum","EditBtn","onClick","width","height","href","svg","DelBtn","transactionId","_id","transactionComment","deleteTransactionThunk","toast","PEr","Modal","OperationForm","edit"],"sourceRoot":""}